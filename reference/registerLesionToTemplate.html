<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Register lesions in template space — registerLesionToTemplate • LESYMAP</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Register lesions in template space — registerLesionToTemplate" />
<meta property="og:description" content="Brings lesion maps in template space by registering the
subject\'s anatomical to the template and applying the
same transform to the lesion. To improve the registration
the anatomical image is bias corrected and denoised. In
addition, you can choose to skull-strip the image and run a
more careful registration brain-on-brain so that the skull
does not impact the registration in any way. Note, for technical
reasons the registration is performed counterintuitively by
moving the template on the subject, and not the subject on the
template. For this reason, to bring the subject in template space
we use the inverse transformation. Also note, at the moment ANTsR
does not produce an inverse affine transformation explicitly, both
forward and inverse affine transforms are identical. You can use ANTs
to compute the inverse, or tell ANTsR if you need to invert an affine
matrix applying the transformations (see whichtoinvert in
antsApplyTransforms)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LESYMAP</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9221</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Register lesions in template space</h1>
    
    <div class="hidden name"><code>registerLesionToTemplate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Brings lesion maps in template space by registering the
subject\'s anatomical to the template and applying the
same transform to the lesion. To improve the registration
the anatomical image is bias corrected and denoised. In
addition, you can choose to skull-strip the image and run a
more careful registration brain-on-brain so that the skull
does not impact the registration in any way. Note, for technical
reasons the registration is performed counterintuitively by
moving the template on the subject, and not the subject on the
template. For this reason, to bring the subject in template space
we use the inverse transformation. Also note, at the moment ANTsR
does not produce an inverse affine transformation explicitly, both
forward and inverse affine transforms are identical. You can use ANTs
to compute the inverse, or tell ANTsR if you need to invert an affine
matrix applying the transformations (see <code>whichtoinvert</code> in
<code><a href='https://rdrr.io/pkg/ANTsRCore/man/antsApplyTransforms.html'>antsApplyTransforms</a></code>).</p>
    </div>

    <pre class="usage"><span class='fu'>registerLesionToTemplate</span>(<span class='no'>subImg</span>, <span class='no'>subLesion</span>, <span class='kw'>templateImg</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>templateBrainMask</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>templateRegMask</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>skullStrip</span> <span class='kw'>=</span> <span class='no'>T</span>,
  <span class='kw'>typeofTransform</span> <span class='kw'>=</span> <span class='st'>"SyNCC"</span>, <span class='kw'>outprefix</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>showInfo</span> <span class='kw'>=</span> <span class='no'>T</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>subImg</th>
      <td><p>antsImage or character filename of the anatomical
image of the subject. Typically this is a T1-weighted
MRI image, on which you drew the lesion map.</p></td>
    </tr>
    <tr>
      <th>subLesion</th>
      <td><p>antsImage or character filename of the lesion map.
Typically you draw this manually or obtain it from
automated lesion segmentation software. You can try
our <a href='https://github.com/dorianps/LINDA'>LINDA
toolbox</a> for an automated alternative. Yet, manual
drawing can be performed
<a href='https://youtu.be/ZVmINdWk5R4'>quickly</a>
 and is preferred.</p></td>
    </tr>
    <tr>
      <th>templateImg</th>
      <td><p>antsImage or filename of the anatomical template
image. This image should be with skull included.</p></td>
    </tr>
    <tr>
      <th>templateBrainMask</th>
      <td><p>antsImage or filename of the template brain
mask. This mask is needed for skull-stripped registrations.</p></td>
    </tr>
    <tr>
      <th>templateRegMask</th>
      <td><p>antsImage or filename of the template mask that includes
the skull but no face. Useful for improving the skull
stripping process.</p></td>
    </tr>
    <tr>
      <th>skullStrip</th>
      <td><p>logical whether to remove the skull and perform
brain-on-brain registration.</p></td>
    </tr>
    <tr>
      <th>typeofTransform</th>
      <td><p>an <code>antsRegistration</code> parameter that controls
the quality of registration. The default is <code>SyNCC</code>, which
probably is the most robust and takes long (1-2 hours maybe).
For faster registration you can try <code>SyN</code>.</p></td>
    </tr>
    <tr>
      <th>outprefix</th>
      <td><p>character of the prefix where to save the output. If
this is set, most of images and transformations will be
saved at the specified path/prefix. The folder must exist or you
will get an error. It is passed without modification to
<code>antsRegistration</code>.</p></td>
    </tr>
    <tr>
      <th>showInfo</th>
      <td><p>logical whether to show info messages or be completely
quiet. If you want also verbose registration messages,
please set <code>verbose=TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments to pass to <code>antsRegistration</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>List of objects returned:</p><ul>
<li><p><code>subImg</code> - subject\'s image in native space (after bias correction,
  denoising, skull stripping, etc.)</p></li>
<li><p><code>subLesion</code> - subject\'s lesion map in native space</p></li>
<li><p><code>subImgTemplate</code> - subject\'s image in template space</p></li>
<li><p><code>subLesionTemplate</code> - subject\'s lesion in template space</p></li>
<li><p><code>subRegMask</code> - registration mask in native space</p></li>
<li><p><code>templateImg</code> - the template used to register the subject</p></li>
<li><p><code>templateBrainMask</code> - the brain mask of the template image</p></li>
<li><p><code>subLesionTemplate</code> - the template mask with skull and no face</p></li>
<li><p><code>registration$inverse_subject2template</code> - transformation matrices subject to template</p></li>
<li><p><code>registration$forward_template2subject</code> - transformation matrices template to subject</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>anatomical</span> <span class='kw'>=</span> <span class='st'>'/mnt/c/User/dp/Desktop/Subject1_anat.nii.gz'</span>
<span class='no'>lesion</span> <span class='kw'>=</span> <span class='st'>'/mnt/c/User/dp/Desktop/Subject1_les.nii.gz'</span>
<span class='no'>newles</span> <span class='kw'>=</span> <span class='fu'>registerLesionToTemplate</span>(<span class='no'>anatomical</span>, <span class='no'>lesion</span>,
        <span class='kw'>outprefix</span> <span class='kw'>=</span> <span class='st'>'/mnt/c/User/dp/Desktop/Subj1onTemplate_'</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dorian Pustina.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


